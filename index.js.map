{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"51334256-c1710c37c982a8ca30afac428\"; \n\nexport default async function getImagesByQuery(query, options = {}) {\n    const {\n        page = 1,\n        limit = 15\n    } = options; \n\n        const { data } = await axios(`https://pixabay.com/api/`, {\n            params:\n            {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page: page,\n                per_page: limit\n            }\n        });\n    \n    \n        return data;\n    }\n\n   \n\n","import SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport \"../css/gallery.css\"\n\nconst loadMoreBtn = document.querySelector(\".load-more-btn\")\nconst gallery = document.querySelector(\".gallery\")\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionsDelay: 250,\n})\n\nexport function createGallery(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n     <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n             class=\"gallery-image\"\n             src=\"${webformatURL}\"\n             alt=\"${tags}\"\n             width=\"360\"\n            />\n        </a>\n        <div class=\"image-info\">\n            <p><b>Likes</b> ${likes}</p>\n            <p><b>Views</b> ${views}</p>\n            <p><b>Comments</b> ${comments}</p>\n            <p><b>Downloads</b> ${downloads}</p>\n        </div>\n    </li>\n    `).join(\"\");\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh();\n}\n\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n}\n\nexport function onLoadMoreClick(callback) {\n    loadMoreBtn.addEventListener(\"click\", callback);\n}\n\nexport function showLoader() {\n  document.querySelector('.loader').classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader').classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n\nexport function disableLoadMoreButton() {\n    loadMoreBtn.disabled = true;\n}\n\nexport function enableLoadMoreButton() {\n    loadMoreBtn.disabled = false;\n}","import getImagesByQuery from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton, disableLoadMoreButton, enableLoadMoreButton, onLoadMoreClick } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst form = document.querySelector(\".form\");\nconst IMAGES_PER_PAGE = 15;\nlet page = 1;\nlet totalPages = 0;\nlet searchQuery = \"\";\n\nform.addEventListener(\"submit\", handleSubmit);\nonLoadMoreClick(handleLoadMore);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    clearGallery();\n    hideLoadMoreButton();\n   \n    page = 1;\n\n\n\n    const query = event.currentTarget.elements.searchText;\n    const trimmedQuery = query.value.trim();\n    searchQuery = trimmedQuery;\n\n    if (!trimmedQuery) {\n        iziToast.info({\n            title: \"Please!\",\n            message: \"Enter request!\",\n            position: \"topRight\",\n            timeout: 3000,\n        });\n        return;\n    }\n    showLoader();\n    try {\n        const result = await getImagesByQuery(trimmedQuery, { page, limit: IMAGES_PER_PAGE })\n        \n            \n        if (result.hits.length === 0) {\n           iziToast.error({\n            message: \"No images found!\",\n            position: 'topRight',\n            timeout: 3000,\n           });\n            hideLoader();\n            return;\n            \n        }\n        \n\n        totalPages = Math.ceil(result.totalHits / IMAGES_PER_PAGE);\n        createGallery(result.hits);\n        if (page < totalPages) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"That's all we found for your search.\",\n                position: 'topRight',\n                timeout: 3000,\n            });\n\n        }\n        query.value = '';\n    } catch {\n        iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'topRight',\n            timeout: 3000,\n        });\n        hideLoadMoreButton();\n    } finally {\n         hideLoader();\n\n    }\n    \n   \n}\n\n\nasync function handleLoadMore() {\n    page++;\n    disableLoadMoreButton();\n    showLoader();\n\n\n    try { \n        const data = await getImagesByQuery(searchQuery, { page, limit: IMAGES_PER_PAGE });\n        createGallery(data.hits);\n        \n        setTimeout(() => {\n            const firstCard = document.querySelector('.gallery-item');\n            if (firstCard) {\n                const cardHeight = firstCard.getBoundingClientRect().height;\n                window.scrollBy({\n                    top: cardHeight * 2,\n                    behavior: 'smooth'\n                });\n            }\n        }, 100);    \n\n        if (page >= totalPages) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                timeout: 3000,\n            });\n\n        }\n\n    } catch {\n         iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: 'topRight',\n                timeout: 3000,\n            });\n\n    } finally {\n        enableLoadMoreButton();\n        hideLoader();\n    }\n     \n}"],"names":["API_KEY","getImagesByQuery","query","options","page","limit","data","axios","loadMoreBtn","gallery","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","onLoadMoreClick","callback","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","disableLoadMoreButton","enableLoadMoreButton","form","IMAGES_PER_PAGE","totalPages","searchQuery","handleSubmit","handleLoadMore","event","trimmedQuery","iziToast","result","firstCard","cardHeight"],"mappings":"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"}